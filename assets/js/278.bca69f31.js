(window.webpackJsonp=window.webpackJsonp||[]).push([[278],{611:function(s,a,n){"use strict";n.r(a);var e=n(2),t=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"dql-聚合函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dql-聚合函数"}},[s._v("#")]),s._v(" DQL-聚合函数")]),s._v(" "),a("p",[s._v("SQL基本函数，聚合函数对一组值执行计算，并返回单个值，也被称为组函数。")]),s._v(" "),a("p",[s._v("聚合函数对一组值执行计算并返回单一的值。除 COUNT 以外，聚合函数忽略空值，如果COUNT函数的应用对象是一个确定列名，并且该列存在空值，此时COUNT仍会忽略空值。")]),s._v(" "),a("p",[s._v("所有聚合函数都具有确定性。任何时候用一组给定的输入值调用它们时，都返回相同的值。聚合函数可以应用于查询语句的SELECT中，或者HAVING子句中，但不可用于WHERE语句中，因为WHERE是对逐条的行记录进行筛选。")]),s._v(" "),a("h2",{attrs:{id:"聚合函数概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#聚合函数概述"}},[s._v("#")]),s._v(" 聚合函数概述")]),s._v(" "),a("h3",{attrs:{id:"什么是聚合函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是聚合函数"}},[s._v("#")]),s._v(" 什么是聚合函数")]),s._v(" "),a("p",[s._v("SQL基本函数，聚合函数对一组值执行计算，并返回单个值，也被称为组函数。 聚合函数经常与 SELECT 语句的 GROUP BY 子句的HAVING一同使用。")]),s._v(" "),a("h3",{attrs:{id:"聚合函数的特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#聚合函数的特点"}},[s._v("#")]),s._v(" 聚合函数的特点")]),s._v(" "),a("p",[s._v("除了 COUNT 以外，聚合函数忽略空值。\n聚合函数经常与 SELECT 语句的 GROUP BY 子句一同使用。\n所有聚合函数都具有确定性。任何时候用一组给定的输入值调用它们时，都返回相同的值。")]),s._v(" "),a("h3",{attrs:{id:"常用聚合函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用聚合函数"}},[s._v("#")]),s._v(" 常用聚合函数")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("count(字段名)：统计总行数\nsum(字段名)：计算列总和\navg(字段名)：求某一列平均值\nmin(字段名)：求某一列的最小值\nmax(字段名)：求某一列的最大值\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"_1-4、聚合函数语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4、聚合函数语法"}},[s._v("#")]),s._v(" 1.4、聚合函数语法")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("格式：\nselect 聚合函数(字段名) from 数据库表名;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"二、聚合函数应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、聚合函数应用"}},[s._v("#")]),s._v(" 二、聚合函数应用")]),s._v(" "),a("h3",{attrs:{id:"聚合函数基础应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#聚合函数基础应用"}},[s._v("#")]),s._v(" 聚合函数基础应用")]),s._v(" "),a("p",[a("strong",[s._v("案例：")])]),s._v(" "),a("p",[s._v("查看学生信息表中通过英语成绩统计所有的学生数")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select count(english) as 学生人数 from students;\n+-----+\n| 总人数 |\n+-----+\n| 7   |\n+-----+\n1 行于数据集 (0.01 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[a("strong",[s._v("注意：")])]),s._v(" "),a("p",[s._v("null的记录是不会统计，如果要想统计null，可以用ifnull(字段名,默认值)")]),s._v(" "),a("p",[s._v("默认值里设置：null用0表示")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select count(ifnull(english,0)) as 总人数 from students;\n+-----+\n| 总人数 |\n+-----+\n| 9   |\n+-----+\n1 行于数据集 (0.02 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("除了前面这个方法可以统计学生人数外，我们还可以：")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#比较常用的方法\nmysql> select count(*) from students;\n+----------+\n| count(*) |\n+----------+\n| 9        |\n+----------+\n1 行于数据集 (0.01 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("查看学生信息表中年龄大于19的总人数")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select count(*) from students where age>19;\n+----------+\n| count(*) |\n+----------+\n| 2        |\n+----------+\n1 行于数据集 (0.02 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("查看学生信息表中英语成绩的总分")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select sum(english) as 英语总分 from students;\n+-------+\n| 英语总分  |\n+-------+\n| 544.5 |\n+-------+\n1 行于数据集 (0.01 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("查看学生信息表中英语成绩的平均分")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select avg(english) as 英语平均分 from students;\n+----------+\n| 英语平均分    |\n+----------+\n| 77.78571 |\n+----------+\n1 行于数据集 (0.01 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("查看学生信息表中英语成绩的最高分")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select max(english) as 英语最高分 from students;\n+-------+\n| 英语最高分 |\n+-------+\n| 98.5  |\n+-------+\n1 行于数据集 (0.01 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("查看学生信息表中英语成绩的最低分")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select min(english) as 英语最低分 from students;\n+-------+\n| 英语最低分 |\n+-------+\n| 50.0  |\n+-------+\n1 行于数据集 (0.01 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"聚合函数分组应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#聚合函数分组应用"}},[s._v("#")]),s._v(" 聚合函数分组应用")]),s._v(" "),a("p",[a("strong",[s._v("案例：")])]),s._v(" "),a("p",[s._v("统计学生信息表中男生的人数与女生的人数")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select count(*),sex from students group by sex;\n+----------+------+\n| count(*) | sex  |\n+----------+------+\n| 6        | 男  |\n| 3        | 女  |\n+----------+------+\n2 行于数据集 (0.01 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("统计学生信息表中男生和女生的人数、英语总成绩、数学平均成绩")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select count(*),sex,sum(english),avg(math) from students group by sex;\n+----------+------+--------------+-----------+\n| count(*) | sex  | sum(english) | avg(math) |\n+----------+------+--------------+-----------+\n| 6        | 男  | 318.5        | 87.25000  |\n| 3        | 女  | 226.0        | 82.66667  |\n+----------+------+--------------+-----------+\n2 行于数据集 (0.01 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("统计学生信息表中男生和女生的人数、英语总成绩、数学平均成绩，总人数超过3人显示")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select count(*) as n,sex,sum(english),avg(math) from students group by sex having n>3;\n+---+------+--------------+-----------+\n| n | sex  | sum(english) | avg(math) |\n+---+------+--------------+-----------+\n| 6 | 男  | 318.5        | 87.25000  |\n+---+------+--------------+-----------+\n1 行于数据集 (0.02 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h2",{attrs:{id:"聚合函数应用扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#聚合函数应用扩展"}},[s._v("#")]),s._v(" 聚合函数应用扩展")]),s._v(" "),a("h3",{attrs:{id:"group-concat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#group-concat"}},[s._v("#")]),s._v(" group_concat")]),s._v(" "),a("p",[s._v("group_concat(字段名)可以作为一个输出字段来使用，表示分组之后，根据分组结果，使用group_concat()来放置每一组的某字段的值的集合。")]),s._v(" "),a("p",[a("strong",[s._v("案例：")])]),s._v(" "),a("p",[s._v("统计学生信息表中男生和女生的人数、英语总成绩、数学平均成绩及数学成绩的集合")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select count(*),sex,sum(english),avg(math),group_concat(math) from students group by sex;\n+----------+------+--------------+-----------+---------------------+\n| count(*) | sex  | sum(english) | avg(math) | group_concat(math)  |\n+----------+------+--------------+-----------+---------------------+\n| 3        | 女  | 226.0        | 82.66667  | 80.0,70.0,98.0      |\n| 6        | 男  | 318.5        | 87.25000  | 88.0,88.0,85.0,88.0 |\n+----------+------+--------------+-----------+---------------------+\n2 行于数据集 (0.02 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"with-rollup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#with-rollup"}},[s._v("#")]),s._v(" with rollup")]),s._v(" "),a("p",[s._v("在最后新增一行，来记录当前列里所有记录的总和")]),s._v(" "),a("p",[a("strong",[s._v("案例：")])]),s._v(" "),a("p",[s._v("统计学生信息表中男生和女生的人数、英语总成绩、数学平均成绩及增加显示列的记录总和")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select count(*),sex,sum(english),avg(math) from students group by sex with rollup;\n+----------+------+--------------+-----------+\n| count(*) | sex  | sum(english) | avg(math) |\n+----------+------+--------------+-----------+\n| 3        | 女  | 226.0        | 82.66667  |\n| 6        | 男  | 318.5        | 87.25000  |\n| 9        | NULL | 544.5        | 85.28571  |\n+----------+------+--------------+-----------+\n3 行于数据集 (0.02 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);