(window.webpackJsonp=window.webpackJsonp||[]).push([[284],{615:function(s,a,n){"use strict";n.r(a);var e=n(2),t=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"mysql子查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql子查询"}},[s._v("#")]),s._v(" MySQL子查询")]),s._v(" "),a("p",[s._v("在SQL语言中，一个SELECT-FROM-WHERE语句称为一个查询块。当获得一个查询的答案需要多个步骤的操作，首先必须创建一个查询来确定用户不知道但包含在数据库中的值，将一个查询块嵌套在另一个查询块的WHERE字句或HAVING短语的条件中查询块称为子查询或内层查询。上层的查询块曾为父查询或外层查询。子查询的结果作为输入传递回“父查询”或“外部查询”。父查询将这个值结合到计算中，以便确定最后的输出。")]),s._v(" "),a("h2",{attrs:{id:"子查询概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#子查询概述"}},[s._v("#")]),s._v(" 子查询概述")]),s._v(" "),a("h3",{attrs:{id:"什么是子查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是子查询"}},[s._v("#")]),s._v(" 什么是子查询")]),s._v(" "),a("p",[s._v("子查询是一种常用计算机语言sql中select语言中嵌套查询下层的程序模块。当一个查询是另一个查询的条件时，称之为子查询。")]),s._v(" "),a("p",[a("strong",[s._v("如：")])]),s._v(" "),a("p",[s._v("查询渠道部有那些员工")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#第一步，查询出'渠道部'的id\nmysql> select id from dept where name='渠道部';\n+----+\n| id |\n+----+\n| 2  |\n+----+\n1 行于数据集 (0.02 秒)\n#第二步，通过查询出的‘渠道部’的id，在查询渠道部的员工信息\nmysql> select * from emp where dept_id=2;\n+----+--------+--------+--------+------------+---------+\n| id | name   | gender | salary | join_date  | dept_id |\n+----+--------+--------+--------+------------+---------+\n| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       |\n| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       |\n+----+--------+--------+--------+------------+---------+\n2 行于数据集 (0.01 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("子查询方式")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select * from emp where dept_id=(select id from dept where name='渠道部');\n+----+--------+--------+--------+------------+---------+\n| id | name   | gender | salary | join_date  | dept_id |\n+----+--------+--------+--------+------------+---------+\n| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       |\n| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       |\n+----+--------+--------+--------+------------+---------+\n2 行于数据集 (0.03 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"子查询特点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#子查询特点"}},[s._v("#")]),s._v(" 子查询特点")]),s._v(" "),a("p",[s._v("一个查询的结果做为另一个查询的条件")]),s._v(" "),a("p",[s._v("有查询的嵌套，内部的查询称为子查询")]),s._v(" "),a("p",[s._v("子查询要使用括号")]),s._v(" "),a("h3",{attrs:{id:"子查询结果的三种情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#子查询结果的三种情况"}},[s._v("#")]),s._v(" 子查询结果的三种情况")]),s._v(" "),a("p",[s._v("单行单列")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519226794.png",alt:"image20200215215222589.png"}})]),s._v(" "),a("p",[s._v("多行单列")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519241295.png",alt:"image20200215215408848.png"}})]),s._v(" "),a("p",[s._v("多行多列")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://www.zutuanxue.com:8000/static/media/images/2020/10/24/1603519252162.png",alt:"image20200215215431152.png"}})]),s._v(" "),a("h2",{attrs:{id:"单行单列查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单行单列查询"}},[s._v("#")]),s._v(" 单行单列查询")]),s._v(" "),a("p",[s._v("子查询结果只要是单行单列，肯定在 WHERE 后面作为条件，父查询使用：比较运算符，如：> 、<、<>、=、>=、<=等")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("格式：\nselect */字段列表 from 数据库表名 where 字段名=(子查询);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("案例：")])]),s._v(" "),a("p",[s._v("查询工资最高的员工信息")]),s._v(" "),a("p",[s._v("分析：")]),s._v(" "),a("p",[s._v("先找出最高工资，在查找员工信息")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select max(salary) from emp;\n+-------------+\n| max(salary) |\n+-------------+\n| 9000        |\n+-------------+\n1 行于数据集 (0.01 秒)\n\nmysql> select * from emp where salary=(select max(salary) from emp);\n+----+--------+--------+--------+------------+---------+\n| id | name   | gender | salary | join_date  | dept_id |\n+----+--------+--------+--------+------------+---------+\n| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       |\n+----+--------+--------+--------+------------+---------+\n1 行于数据集 (0.01 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("查询工资小于平均工资的员工信息")]),s._v(" "),a("p",[s._v("分析：")]),s._v(" "),a("p",[s._v("先算出员工的平均工资，在查看小于平均工资的员工信息")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select avg(salary) from emp;\n+-------------------+\n| avg(salary)       |\n+-------------------+\n| 5994.333333333333 |\n+-------------------+\n1 行于数据集 (0.02 秒)\n\nmysql> select * from emp where salary<(select avg(salary) from emp);\n+----+--------+--------+--------+------------+---------+\n| id | name   | gender | salary | join_date  | dept_id |\n+----+--------+--------+--------+------------+---------+\n| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       |\n| 4  | 赵六 | 女    | 5000   | 2015-10-07 | 3       |\n| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       |\n+----+--------+--------+--------+------------+---------+\n3 行于数据集 (0.03 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h2",{attrs:{id:"单行多列查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单行多列查询"}},[s._v("#")]),s._v(" 单行多列查询")]),s._v(" "),a("p",[s._v("子查询结果只要是单行多列，结果集类似于一个数组，父查询使用in、not in运算符")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("格式：\nselect */字段列表 from 数据库表名 where 字段名 in (子查询);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("案例：")])]),s._v(" "),a("p",[s._v("查询工资大于 5000 的员工，来自于哪些部门的名字")]),s._v(" "),a("p",[s._v("分析：")]),s._v(" "),a("p",[s._v("先找出工资大于5000的员工的部门ID，通过部门ID查找对应的部门名字")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select dept_id from emp where salary>5000;\n+---------+\n| dept_id |\n+---------+\n| 1       |\n| 2       |\n+---------+\n2 行于数据集 (0.01 秒)\n\nmysql> select * from dept where id in(select dept_id from emp where salary>5000); \n+----+-----------+\n| id | name      |\n+----+-----------+\n| 1  | 研发部 |\n| 2  | 渠道部 |\n+----+-----------+\n2 行于数据集 (0.01 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("查询研发部与渠道部所有的员工信息")]),s._v(" "),a("p",[s._v("分析：")]),s._v(" "),a("p",[s._v("先查找研发部与渠道部的id，通过id查找到研发部与渠道部的员工信息")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select id from dept where name='研发部' or name='渠道部';\n+----+\n| id |\n+----+\n| 1  |\n| 2  |\n+----+\n\nmysql> select * from emp where dept_id in(select id from dept where name in('研发部','渠道部'));\n+----+--------+--------+--------+------------+---------+\n| id | name   | gender | salary | join_date  | dept_id |\n+----+--------+--------+--------+------------+---------+\n| 1  | 张三 | 男    | 7200   | 2013-02-24 | 1       |\n| 2  | 李四 | 男    | 3600   | 2010-12-02 | 2       |\n| 3  | 王五 | 男    | 9000   | 2008-08-08 | 2       |\n| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       |\n+----+--------+--------+--------+------------+---------+\n4 行于数据集 (0.02 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("h2",{attrs:{id:"多行多列"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#多行多列"}},[s._v("#")]),s._v(" 多行多列")]),s._v(" "),a("p",[s._v("子查询结果只要是多行多列，肯定在 FROM 后面作为表，子查询作为表需要取别名，否则这张表没有名称则无法访问表中的字段。")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("格式：\nselect */字段列表 from (子查询) [as] 表别名 where 条件表达式;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("案例：")])]),s._v(" "),a("p",[s._v("查询出 2011 年以后入职的员工信息，包括部门名称")]),s._v(" "),a("p",[s._v("分析：\n先找出2011年入职的员工信息组成一个新表，在查询所在的部门信息")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select * from emp where join_date>='2011-01-01';\n+----+--------+--------+--------+------------+---------+\n| id | name   | gender | salary | join_date  | dept_id |\n+----+--------+--------+--------+------------+---------+\n| 1  | 张三 | 男    | 7200   | 2013-02-24 | 1       |\n| 4  | 赵六 | 女    | 5000   | 2015-10-07 | 3       |\n| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       |\n+----+--------+--------+--------+------------+---------+\n3 行于数据集 (0.01 秒)\n\nmysql> select * from dept d,(select * from emp where join_date>='2011-01-01') e where d.id=e.dept_id;\n+----+-----------+-------+---------+--------+--------+------------+---------+\n| id | name      | id(2) | name(2) | gender | salary | join_date  | dept_id |\n+----+-----------+-------+---------+--------+--------+------------+---------+\n| 1  | 研发部 | 1     | 张三  | 男    | 7200   | 2013-02-24 | 1       |\n| 3  | 教务部 | 4     | 赵六  | 女    | 5000   | 2015-10-07 | 3       |\n| 1  | 研发部 | 5     | 吴七  | 女    | 4500   | 2011-03-14 | 1       |\n+----+-----------+-------+---------+--------+--------+------------+---------+\n3 行于数据集 (0.02 秒)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("p",[s._v("还可以使用表连接查询")]),s._v(" "),a("div",{staticClass:"language-mysql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> select * from emp inner join dept on emp.dept_id = dept.id where join_date >='2011-1-1';\n+----+--------+--------+--------+------------+---------+-------+-----------+\n| id | name   | gender | salary | join_date  | dept_id | id(2) | name(2)   |\n+----+--------+--------+--------+------------+---------+-------+-----------+\n| 1  | 张三 | 男    | 7200   | 2013-02-24 | 1       | 1     | 研发部 |\n| 4  | 赵六 | 女    | 5000   | 2015-10-07 | 3       | 3     | 教务部 |\n| 5  | 吴七 | 女    | 4500   | 2011-03-14 | 1       | 1     | 研发部 |\n+----+--------+--------+--------+------------+---------+-------+-----------+\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);